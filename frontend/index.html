<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenBackground - Background Removal</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                        <path d="M8 16C8 11.5817 11.5817 8 16 8V8C20.4183 8 24 11.5817 24 16V16C24 20.4183 20.4183 24 16 24V24C11.5817 24 8 20.4183 8 16V16Z" stroke="white" stroke-width="2" stroke-dasharray="4 2"/>
                        <circle cx="16" cy="16" r="4" fill="white"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop stop-color="#6366f1"/>
                                <stop offset="1" stop-color="#8b5cf6"/>
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1>OpenBackground</h1>
            </div>
            <div class="header-actions">
                <div class="api-key-input">
                    <label for="apiKey">API Key</label>
                    <input type="password" id="apiKey" placeholder="Enter your API key" autocomplete="off">
                    <button class="btn-icon" id="toggleApiKey" title="Show/Hide API Key">
                        <svg class="icon-eye" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </button>
                </div>
                <a href="/api/docs" target="_blank" class="btn btn-secondary">API Docs</a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Upload Section -->
            <section class="section upload-section">
                <div class="section-header">
                    <h2>Remove Background</h2>
                    <div class="model-selector">
                        <label for="modelSelect">Model:</label>
                        <select id="modelSelect">
                            <option value="">Loading...</option>
                        </select>
                        <span class="device-badge" id="deviceBadge">CPU</span>
                    </div>
                </div>

                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17,8 12,3 7,8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                        </div>
                        <p class="upload-text">Drag & drop an image here</p>
                        <p class="upload-subtext">or click to browse</p>
                        <input type="file" id="fileInput" accept="image/*" hidden>
                    </div>
                </div>

                <div class="options-row">
                    <label class="checkbox-label">
                        <input type="checkbox" id="returnMask">
                        <span class="checkbox-custom"></span>
                        Return mask only
                    </label>
                    <button class="btn btn-primary" id="processBtn" disabled>
                        <span class="btn-text">Process Image</span>
                        <span class="btn-spinner"></span>
                    </button>
                </div>
            </section>

            <!-- Preview Section -->
            <section class="section preview-section" id="previewSection">
                <div class="section-header">
                    <h2>Result</h2>
                    <div class="preview-actions">
                        <span class="processing-time" id="processingTime"></span>
                        <button class="btn btn-secondary" id="downloadBtn" disabled>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7,10 12,15 17,10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            Download
                        </button>
                    </div>
                </div>

                <div class="preview-container">
                    <div class="preview-panel">
                        <h3>Original</h3>
                        <div class="image-wrapper" id="originalWrapper">
                            <div class="placeholder">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <polyline points="21,15 16,10 5,21"/>
                                </svg>
                            </div>
                            <img id="originalImage" alt="Original image">
                        </div>
                    </div>
                    <div class="preview-divider">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9,18 15,12 9,6"/>
                        </svg>
                    </div>
                    <div class="preview-panel">
                        <h3>Processed</h3>
                        <div class="image-wrapper checkered" id="processedWrapper">
                            <div class="placeholder">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <polyline points="21,15 16,10 5,21"/>
                                </svg>
                            </div>
                            <img id="processedImage" alt="Processed image">
                        </div>
                    </div>
                </div>
            </section>

            <!-- Statistics Section -->
            <section class="section stats-section">
                <div class="section-header">
                    <h2>Statistics</h2>
                    <button class="btn btn-ghost" id="refreshStats">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6"/>
                            <path d="M1 20v-6h6"/>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                        </svg>
                        Refresh
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21,15 16,10 5,21"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="totalRequests">0</span>
                            <span class="stat-label">Total Requests</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon success">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22,4 12,14.01 9,11.01"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="successRate">100%</span>
                            <span class="stat-label">Success Rate</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon time">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12,6 12,12 16,14"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="avgTime">0ms</span>
                            <span class="stat-label">Avg Processing Time</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon uptime">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 20V10"/>
                                <path d="M12 20V4"/>
                                <path d="M6 20v-6"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="uptime">0s</span>
                            <span class="stat-label">Uptime</span>
                        </div>
                    </div>
                </div>

                <div class="model-stats" id="modelStats">
                    <h3>Requests per Model</h3>
                    <div class="model-bars" id="modelBars">
                        <p class="no-data">No data yet</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Toast Container -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>

